<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>
        
        NathanCHEN
        
    </title>
    
    
    <link href="atom.xml" rel="alternate" title="NathanCHEN" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css"/>
    <link rel="stylesheet" href="asset/css/docs.css"/>
    <link rel="stylesheet" href="asset/css/my.css"/>
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>

</head>
<body class="antialiased hide-extras">

<div class="marketing off-canvas-wrap" data-offcanvas>
    <div class="inner-wrap">


        <nav class="top-bar docs-bar hide-for-small" data-topbar>


            <section class="top-bar-section">
                <div class="row">
                    <div style="position: relative;width:100%;">
                        <div style="position: absolute; width:100%;">
                            <ul id="main-menu" class="left">
                                <li id="menu_item_index"><a href="index.html">HOME</a></li>
                                <li id="menu_item_archives"><a href="archives.html">Archives</a></li>
                                <li id="menu_item_about"><a href="about.html">ABOUT</a></li>
                            </ul>

                            <ul class="right" id="search-wrap">
                                <li>
                                    <form target="_blank" action="http://google.com/search" method="get">
                                        <input type="hidden" name="q" value="site:nathanchen.github.io"/>
                                        <input tabindex="1" type="search" name="q" placeholder="Search"/>
                                    </form>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

        </nav>

        <nav class="tab-bar show-for-small">
            <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
                <span> &nbsp; NathanCHEN</span>
            </a>
        </nav>

        <aside class="left-off-canvas-menu">
            <ul class="off-canvas-list">

                <li><a href="index.html">HOME</a></li>
                <li><a href="archives.html">Archives</a></li>
                <li><a href="about.html">ABOUT</a></li>

                <li><label>Categories</label></li>

                
                <li><a href="Java.html">Java</a></li>
                
                <li><a href="JavaScript.html">JavaScript</a></li>
                
                <li><a href="Ngnix.html">Ngnix</a></li>
                
                <li><a href="tomcat.html">tomcat</a></li>
                
                <li><a href="spring.html">spring</a></li>
                
                <li><a href="RabbitMQ.html">RabbitMQ</a></li>
                
                <li><a href="ELK.html">ELK</a></li>
                
                <li><a href="%E7%BD%91%E7%BB%9C.html">网络</a></li>
                
                <li><a href="%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB.html">源码阅读</a></li>
                
                <li><a href="others.html">others</a></li>
                
                <li><a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html">数据库</a></li>
                
                <li><a href="PAXOS.html">PAXOS</a></li>
                
                <li><a href="%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90Java%20Web%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95.html">深入分析Java Web技术内幕</a></li>
                
                <li><a href="Java7%20Concurrency%20Cookbook.html">Java7 Concurrency Cookbook</a></li>
                
                <li><a href="GoogleDevelopersWebFundamentals.html">GoogleDevelopersWebFundamentals</a></li>
                

            </ul>
        </aside>

        <a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
 <script type="text/javascript">
    $(function () {
        $('#menu_item_index').addClass('is_active');
    });
</script>
<div class="row">
    <div class="large-8 medium-8 columns">
        <div class="markdown-body home-categories">
            
            <div class="article">
                <a class="clearlink" href="14521346615206.html">
                    
                    <h1>Spring</h1>

                    <div class="a-content">
                        
                        <div class="a-content-text">
                            
                            <p>The Spring Inversion of Control (IOC) container has three main logical components: a registry (called the <code>ApplicationContext</code>) of components (beans) that are available to be used by the application, a configurer system that injects objects&#39; dependencies into them by matching up the dependencies with beans in the context. and a dependency solver that can look at a configuration of many different beans and determine how to instantiate and configure them in the necessary order.</p>

<p>The IoC container isnt&#39;t magic, and it has no way of knowing about Java objects unless you somehow inform it of them. When you call <code>new</code>, the JVM instantiates a copuy of the new object and hands it straight to you - it never goes through the configuration process. There are three ways that you can get your beans configured.</p>

<h4 id="toc_0">Inject your beans</h4>

<p>The most preferable opetion is to let Spring autowire all of your beans; thie requires the least amount of code and is the most maintainable.</p>

<h4 id="toc_1">Use @Configurable</h4>

<p>If you really need objects created with <code>new</code> to be autowired, you can use the Spring <code>Configurable</code> annotation along with AspectJ compile-time weaving to inject your objects. This approach inserts code into your object&#39;s constructor that alerts Spring that it&#39;s being created so that Spring can configure the new instance. This requires a bit of configuration in your build and turning on Spring&#39;s runtime configuration handlers.</p>

<p>IoC is also known as dependency injection (DI). It is a process whereby objects define their dependencies, that is, the other objects they work with, only through constructor arguments, arguments to a factory method, or properties that are set on the object instance after it is constructed or returned from a factory method.</p>

                            
                        </div>
                    </div>
                </a>

                <div class="read-more clearfix">
                    <div class="more-left left">
                        
                        <span class="date">2016/1/7</span>
                        <span>posted in&nbsp;</span> 
                        
                        <span class="posted-in"><a href='Java.html'>Java</a></span>
                        
                    </div>
                    <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                    </div>
                </div>
            </div>
            <!-- article -->
            
            <div class="article">
                <a class="clearlink" href="14520627613437.html">
                    
                    <h1>Nginx</h1>

                    <div class="a-content">
                        
                        <div class="a-content-text">
                            
                            <p><code>Nginx</code>的特点：</p>

<ul>
<li>处理响应请求很快：在正常的情况下，单次请求会得到更快的响应</li>
<li>高并发连接：<code>Nginx</code>支持的并发连接上限取决于你的内存，10万远未封顶</li>
<li>低的内存消耗</li>
<li>具有很高的可靠性</li>
<li>高扩展性：<code>Nginx</code>的设计极具扩展性，它完全是由多个不同功能、不同层次、不同类型且耦合度极低的模块组成</li>
<li>热部署：<code>master</code>管理进程与<code>worker</code>工作进程的分离设计，使得<code>Nginx</code>具有热部署的功能</li>
</ul>

<p><code>nginx.conf</code>是主配置文件，默认配置如下图：</p>

<pre><code>worker_process # 表示工作进程的数量，一般设置为CPU的核数

worker_connections # 表示每个工作进程的最大连接数

server{} # 块定义了虚拟主机

    listen # 监听端口
    server_name # 监听域名
    location {} # 是用来为匹配的URI进行配置，URI即语法中的“/uri/”
    location /{} # 匹配任何查询，因为所有请求都以/开头

        root        # 指定对应uri的资源查找路径，这里html为相对路径，完整路径为 /path_to_nginx/html/

        index       # 指定首页index文件的名称，可以配置多个，以空格分开。如有多
                # 个，按配置顺序查找。
</code></pre>

<h3 id="toc_0"><code>location</code>匹配规则</h3>

<pre><code>=       开头表示精确匹配
^~          开头表示uri以某个常规字符串开头。Nginx不对url做编码，因此请求为`/static/20%/aa`，可以被规则`^~ /static/ /aa`匹配到
~           开头表示区分大小写的正则匹配
~*          开头表示不区分大小写的正则匹配
!~和!~*  分别为区分大小写不匹配及不区分大小写不匹配的正则
/           通用匹配，任何请求都会匹配到
</code></pre>

<h3 id="toc_1">Nginx静态文件服务</h3>

<pre><code>http {
    # 这个将为打开文件指定缓存，默认是没有启用的，max 指定缓存数量，
    # 建议和打开文件数一致，inactive 是指经过多长时间文件没被请求后删除缓存。
    open_file_cache max=204800 inactive=20s;

    # open_file_cache 指令中的inactive 参数时间内文件的最少使用次数，
    # 如果超过这个数字，文件描述符一直是在缓存中打开的，如上例，如果有一个
    # 文件在inactive 时间内一次没被使用，它将被移除。
    open_file_cache_min_uses 1;

    # 这个是指多长时间检查一次缓存的有效信息
    open_file_cache_valid 30s;

    # 默认情况下，Nginx的gzip压缩是关闭的， gzip压缩功能就是可以让你节省不
    # 少带宽，但是会增加服务器CPU的开销哦，Nginx默认只对text/html进行压缩 ，
    # 如果要对html之外的内容进行压缩传输，我们需要手动来设置。
    gzip on;
    gzip_min_length 1k;
    gzip_buffers 4 16k;
    gzip_http_version 1.0;
    gzip_comp_level 2;
    gzip_types text/plain application/x-javascript text/css application/xml;

    server {
            listen       80;
            server_name www.test.com;
            charset utf-8;
            root   /data/www.test.com;
            index  index.html index.htm;
           }
}
</code></pre>

                            
                        </div>
                    </div>
                </a>

                <div class="read-more clearfix">
                    <div class="more-left left">
                        
                        <span class="date">2016/1/6</span>
                        <span>posted in&nbsp;</span> 
                        
                        <span class="posted-in"><a href='Ngnix.html'>Ngnix</a></span>
                        
                    </div>
                    <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                    </div>
                </div>
            </div>
            <!-- article -->
            
            <div class="article">
                <a class="clearlink" href="14503593199530.html">
                    
                    <h1>看透Spring MVC</h1>

                    <div class="a-content">
                        
                        <div class="a-content-text">
                            
                            <p>缓存的失效可以定期失效，也可以在数据发生变化的时候失效，如果按数据发生变化让缓存失效，还可以分粗粒度失效和细粒度失效。</p>

<p>像快递送货一样，货单上填写地址的规则以及怎么根据填写的内容找到客户，这就相当于IP协议，而送货时要先打电话，然后将货物送过去，最后客户签收时要签字就相当于TCP协议。</p>

<p>三次握手和四次挥手保证了连接的可靠性，不过这种模式也有它的缺点，首先是在传输效率上会比较低，另外三次握手的过程中客户端需要发送两次数据才可以建立连接，这种特征可能被一些别有用心的人利用，比如，发出第一次握手后就不回应第三次握手了，这时服务端会以为是第二次握手的数据在传输过程中丢失了，然后重新发送第二次握手，默认情况下会一直发送五次，如果发送五次后还收不到第三次握手则会丢弃请求。这就是<code>DDOS</code>攻击中的<code>SYN Flood</code>攻击，对于这种攻击的一种应对方法是设置第二次请求的重发次数，不过重发的次数大小也可能导致正常的请求中因为网络没有收到第二次握手而连接失败的情况。</p>

<p>通过<code>TCP/IP</code>协议、<code>HTTP</code>协议已经可以得到数据了，<code>Servlet</code>的作用是对接收到的数据进行处理并生成要返回给客户端的结果。</p>

<p>域名解析有很多种解析的类型，如常用的A记录和CNAME记录。A记录是将域名解析到IP（一个域名可以有多条A记录），CNAME记录是将域名解析到另一个域名（也就是作为另一个域名的别名），查找时会返回目标域名所对应的IP</p>

<p><code>ServerSocket</code>的使用可以分为三步：<br/>
- 创建<code>ServerSocket</code>：<br/>
- 调用创建出来的<code>ServerSocket</code>的<code>accept</code>方法进行监听。<code>accept</code>方法是阻塞方法，也就是说调用<code>accept</code>方法后程序会停下来等待连接请求，在接收到请求之前程序都不会往下走；当接收到请求后<code>accept</code>方法会返回一个<code>Socket</code><br/>
- 使用<code>accept</code>方法返回的<code>Socket</code>与客户端进行通信</p>

<p>普通<code>Socket</code>处理请求的模式：收到请求，处理，处理好了，收下一个请求。</p>

<p><code>NIOSocket</code>处理请求的模式：快递并不会一件一件地送，而是将很多件货一起拿去送，而且在中转站都有专门的分拣员负责按配送范围将货物分给不同的送货员，这样效率就提高了很多。</p>

<p><code>NIOSocket</code>使用中首先要创建<code>ServerSocketChannel</code>，然后注册<code>Selector</code>，接下来就可以用<code>Selector</code>接受请求并处理了。</p>

<p><code>NIOSocket</code>中服务端的处理过程可以分为5步：<br/>
1、创建<code>ServerSocketChannel</code>并设置相应参数<br/>
2、创建<code>Selector</code>并注册到<code>ServerSocketChannel</code>上<br/>
3、调用<code>Selector</code>的<code>select</code>方法等待请求<br/>
4、<code>Selector</code>接收到请求后使用<code>selectedKeys</code>返回<code>SelectionKey</code>集合<br/>
5、使用<code>SelectionKey</code>获取到<code>Channel</code>，<code>Selector</code>和操作类型并进行具体操作</p>

<pre><code>// 恢复到初始状态
public final Buffer clear()
{
    position = 0;
    limit = capacity;
    mark = -1;
    return this;
}

// 开启读的模式
public final Buffer flip()
{
    limit = position;
    position = 0;
    mark = -1;
    return this;
}
</code></pre>

<p><code>Servlet</code>接口<br/>
- <code>init</code>方法在容器启动时被容器调用（当<code>load-on-startup</code>设置为负数或者不设置时会在<code>Servlet</code>第一次用到时才被调用），只会调用一次<br/>
- <code>getServletConfig</code>方法用于获取<code>ServletConfig</code><br/>
- <code>service</code>方法用于具体处理一个请求<br/>
- <code>getServletInfo</code>方法可以获取一些<code>Servlet</code>相关的信息，默认返回空字符串<br/>
- <code>destroy</code>主要用于在<code>Servlet</code>销毁（一般指关闭服务器）时释放一些资源，只会调用一次</p>

<p><code>getServletName</code>用于获取Servlet的名字，也就是我们在<code>web.xml</code>中定义的<code>servlet-name</code>；<code>getInitParameter</code>方法用于获取<code>init-param</code>配置的参数；<code>getInitParameterNames</code>用于获取配置的所有<code>init-param</code>的名字集合；<code>getServletContext</code>的返回值代表的是我们这个应用本身。<code>ServletConfig</code>是<code>Servlet</code>级的，而<code>ServletContext</code>是<code>Context</code>（也就是<code>Application</code>）级的。</p>

<pre><code>String contextLocation = getServletConfig().getServletContext().getInitParameter(&quot;contextConfigLocation&quot;);
String servletLocation = getServletConfig().getInitParameter(&quot;contextConfigLocation&quot;);
</code></pre>

<h4 id="toc_0">GenericServlet</h4>

<p><code>GenericServlet</code>是<code>Servlet</code>的默认实现，主要是做了三件事：<br/>
- 实现了<code>ServletConfig</code>接口，我们可以直接调用<code>ServletConfig</code>里面的方法<br/>
- 提供了无参的<code>init</code>方法<br/>
- 提供了<code>log</code>方法</p>

<p><code>GenericServlet</code>实现了<code>Servlet</code>的<code>init(ServletConfig config)</code>方法，在里面将<code>config</code>设置给了内部变量<code>config</code>，然后调用了无参的<code>init()</code>方法</p>

<pre><code>public void init(ServletConfig config) throws ServletException {
    this.config = config;
    this.init();
}
public void init() throws ServletException {

}
</code></pre>

<h4 id="toc_1">HttpServlet</h4>

<p><code>HttpServlet</code>是用<code>HTTP</code>协议实现的<code>Servlet</code>的基类。<code>HttpServlet</code>主要重写了<code>service</code>方法。在<code>service</code>方法中首先将<code>ServletRequest</code>和<code>ServletResponse</code>转换为了<code>HttpServletRequest</code>和<code>HttpServletResponse</code>，然后根据<code>Http</code>请求的类型不同将请求路由到了不同的处理方法</p>

<h4 id="toc_2">Tomcat的顶层结构</h4>

<p><code>Tomcat</code>中最顶层的容器叫<code>Server</code>，代表整个服务器，<code>Server</code>中包含至少一个<code>Service</code>，用于具体提供服务。<code>Service</code>主要包含两部分：<code>Connector</code>和<code>Container</code>。<code>Connector</code>用于处理连接相关的事情，并提供<code>Socket</code>与<code>request</code>、<code>response</code>的转换，<code>Container</code>用于封装和管理<code>Servlet</code>，以及具体处理<code>request</code>请求。</p>

<p>一个<code>Tomcat</code>中只有一个<code>Server</code>，一个<code>Server</code>可以包含多个<code>Service</code>，一个<code>Service</code>只有一个<code>Container</code>，但可以有多个<code>Connectors</code>（因为一个服务可以有多个连接）</p>

<h4 id="toc_3">Server的启动过程</h4>

<p>await方法处理的大概逻辑是首先判断端口号port，然后根据port的值分为三种处理方法：<br/>
- port为-2，则会直接退出，不进入循环<br/>
- port为-1，则会进入一个while(!stopAwait)的循环，只有在外部调用stop方法才会退出循环<br/>
- port为其他值，则也会进入一个while(!stopAwait)的循环，不过同时会在port所在的端口启动一个ServerSocket来监听关闭命令，如果姐收到了则会使用break跳出循环</p>

                            
                        </div>
                    </div>
                </a>

                <div class="read-more clearfix">
                    <div class="more-left left">
                        
                        <span class="date">2015/12/17</span>
                        <span>posted in&nbsp;</span> 
                        
                        <span class="posted-in"><a href='Java.html'>Java</a></span>
                        
                    </div>
                    <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                    </div>
                </div>
            </div>
            <!-- article -->
            
            <div class="article">
                <a class="clearlink" href="14503421841704.html">
                    
                    <h1>H5 缓存机制浅析 移动端 Web 加载性能优化</h1>

                    <div class="a-content">
                        
                        <div class="a-content-text">
                            
                            <h3 id="toc_0">H5缓存机制原理分析</h3>

<p>浏览器缓存机制是指通过HTTP协议头里的<code>Cache-Control</code>(或<code>Expires</code>)和<code>Last-Modified</code>（或<code>Etag</code>）等字段来控制文件缓存的机制。</p>

<p><code>Cache-Control</code>用于控制文件在本地缓存有效时长。比如服务器回包：<code>Cache-Control:max-age=600</code> 表示文件在本地应该缓存，且有效时长是600秒（从发出请求算起）。在接下来600秒内，如果有请求这个资源，浏览器不会发出 <code>HTTP</code>请求，而是直接使用本地缓存的文件。</p>

<p><code>Last-Modified</code>是标识文件在服务器上的最新更新时间。下次请求时，如果文件缓存过期，浏览器通过 <code>If-Modified-Since</code> 字段带上这个时间，发送给服务器，由服务器比较时间戳来判断文件是否有修改。如果没有修改，服务器返回304告诉浏览器继续使用缓存；如果有修改，则返回200，同时返回最新的文件。</p>

<h5 id="toc_1">Reference</h5>

<p><a href="http://my.oschina.net/bugly/blog/542883">http://my.oschina.net/bugly/blog/542883</a></p>

                            
                        </div>
                    </div>
                </a>

                <div class="read-more clearfix">
                    <div class="more-left left">
                        
                        <span class="date">2015/12/17</span>
                        
                        
                    </div>
                    <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                    </div>
                </div>
            </div>
            <!-- article -->
            
            <div class="article">
                <a class="clearlink" href="14500953284759.html">
                    
                    <h1>RabbitMQ</h1>

                    <div class="a-content">
                        
                        <div class="a-content-text">
                            
                            <p>RabbitMQ is a message broker. </p>

<p>RabbitMQ, and messaging in general, uses some jargon.</p>

<ul>
<li>Producing means nothing more than sedning. A program that sends messages is a producer.</li>
<li>A queue is the name for a mailbox. It lives inside RabbitMQ. Although messages flow through RabbitMQ and your applications, they can be stored only inside a queue. A queue is not bound by any limits, it can store as many messages as you like - it&#39;s essentially an infinite buffer. Many producers can send messages that go to one queue, many consumers can try to receive data from on queue. </li>
<li>Consuming has a similar meaning to receiving. A consumer is a program that mostly waits to receive messages.</li>
</ul>

<p>The main idea behind Work Queues (Task Queues) is to avoid doing a resource-intensive task immediately and having to wait for it to complete. We encapsulate a task as a message and send it to a queue. A worker process running in the background will pop the tasks and eventually execute the job. When you run many workers the tasks will be shared between them.</p>

<p>One of the adventages of using a Task Queue is the ability to easily parallelise work. If we are building up a backlog of work, we can just add more workers and that way, scale easily.</p>

<p>By default, RabbitMQ will send each message to the next consumer, in sequence. On average every consumer will get the same number of messages. This way of distributing messages is called round-robin.</p>

<h3 id="toc_0">Message Acknowledgments</h3>

<p>We don&#39;t want to lose any tasks. If a worker dies, we&#39;d like the task to be delivered to another worker. In order to make sure a message is never lost, RabbitMQ supports message acknowledgments. An ack is sent back from the consumer to tell RabbitMQ that a particular message has been received, processed and that RabbitMQ is free to delete it.</p>

<p>If a consumer dies (its channel is closed, connection is closed, or TCP connection is lost) without sending an ACK, RabbitMQ will understand that a message wasn&#39;t processed fully and will re-queue it. If there are other consumers online at the same time, it will then quickly redeliver it to another consumer. That way you can be sure that no message is lost, even if the workers occasionally die.</p>

<p>There aren&#39;t any message timeouts; RabbitMQ will redeliver the message only when the worker connection dies. It&#39;s fine even if processing a message takes a very, very long time.</p>

<p>Message acknowledgments are turned on by default.</p>

<h3 id="toc_1">Message durability</h3>

<p>When RabbitMQ quits or crashes it will forget the queues and messages unless you tell it not to. Two things are required to make sure that messages aren&#39;t lost: we need to mark both the queue and messages as durable.</p>

<p>First, we need to make sure that RabbitMQ will never lose our queue. In order to do so, we need to declare it as <code>durable</code>:</p>

<p>RabbitMQ doesnt allow you to redefine an existing queue with different parameters and will return an error to any program that tries to do that.</p>

<p>Marking messages as persistent doesnt fully guarantee that a message wont be lost. Although it tells RabbitMQ to save the message to disk, there is still a short time window when RabbitMQ has accepted a message and hasnt saved it yet. If you need a stronger guarantee then you can use publisher confirms.</p>

<h3 id="toc_2">Fair dispatch</h3>

<p>In a situation with two workers, when all odd messages are heavy and even messages are light, one worker will constantly busy and the other one will do hardly any work. RabbitMQ doesnt know anything about that and will still dispatch messages evenly.</p>

<p>This happens because RabbitMQ just dispatches a message when the message enters the queue. It doesnt look at the number of unacknowledged messages for a consumer. It just blindly dispatches every n-th message to the n-th consumer.</p>

<p>In order to defeat that we can use the <code>basicQos</code> method with the <code>prefetchCount = 1</code> setting. This tells RabbitMQ not to give more than one message to a worker at a time. Or, in other words, dont dispatch a new message to a worker until it has processed and acknowledged the previous one. Instead, it will dispatch it to the next worker that is not still busy.</p>

<h3 id="toc_3">Exchanges</h3>

<p>The core idea in the messaging model in RabbitMQ is that the producer never sends any messages directly to a queue. Actually, quite often the producer doesnt even know if a message will be delivered to any queue at all. </p>

<p>Instead, the producer can only send messages to an exchange. On one side it receives messages from producers and the other side it pushes them to queues. The exchange must know exactly what to do with a message it receives.</p>

<p>We need to tell the exchange to send messages to our queue. That relationship between exchange and a queue is called a binding.</p>

<h3 id="toc_4">Direct exchange</h3>

<p>The routing algorithm behind a <code>direct</code> exchange is simple - a message goes to the queues whose <code>binding key</code> exactly matches the <code>routing key</code> of the message.</p>

<h3 id="toc_5">Multiple bindings</h3>

<p>the <code>direct</code> exchange will behave like <code>fanout</code> and will broadcast the message to all the matching queues.</p>

<h3 id="toc_6">Topic exchange</h3>

<p>Messages sent tp a topic exchange cant have an arbitrary routing_key - it must be a list of words, delimited by dots. The words can be anything, but usually they specify some features connected to the message.</p>

<p>The binding key must also be in the same form. The logic behind the topic exchange is similar to a direct one - a message sent with a particular routing key will be delivered to all the queues that are bound with a matching binding key. However there are two important special cases for binding keys:</p>

<ul>
<li><code>*</code> can substitute for exactly one word</li>
<li><code>#</code> can substitute for zero or more words</li>
</ul>

<p>Queues are bound to an exchange using a &#39;Binding&#39;. A publisher sends a message to an exchange. The exchange will accept the message and routes it to one or more queues (or another exchange) based on the bindings. An exchange completely decouples a publisher from queues and the consumers that consumes from those queues.</p>

<p>A queue will store the messages in memory or disk and deliver them to consumers. A queue binds itself to an exchange using a &#39;Binding&#39; which describes the criteria for the type of messages it is interested in.</p>

<p>A binding defines the relationship between an exchange and a queue. The most simple case is where the binding equals the queue name. A binding decouples a queue from an exchange. The same queue can be bound to any number of exchanges using the same criteria or different criteria. Different queues can be bound to the same exchange using the same routing criteria as well.</p>

<p>A message can be matched with more than one queue if two or more queues are bound with the same routing criteria.</p>

<h4 id="toc_7">Direct Exchange</h4>

<p>The exchange does a direct match between the routing key provided in the message and the routing criteria used when a queue is bound to this exchange.</p>

<p>The most common use case is to bind the queue to the exchange using the queue name.</p>

<h4 id="toc_8">Topic Exchange</h4>

<p>The exchange does a wildcard match between the routing key and the routing pattern specified in the binding. The routing key is treated as zero or more words, delimited by &#39;.&#39; and supports special wildcard characters. &quot;*&quot; matches a single word and &#39;#&#39; matches zero or more words.</p>

<h4 id="toc_9">Fanout Exchange</h4>

<p>Queues are bound to this exchange with no arguments. Hence any message sent to this exchange will be forwarded to all queues bound to this exchange.</p>

                            
                        </div>
                    </div>
                </a>

                <div class="read-more clearfix">
                    <div class="more-left left">
                        
                        <span class="date">2015/12/14</span>
                        
                        
                    </div>
                    <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                    </div>
                </div>
            </div>
            <!-- article -->
            


            <div class="row">
                <div class="large-6 columns">
                    <p class="text-left" style="padding-top:25px;">
                         <a href="all_16.html">&laquo; Prev Page</a> 
                    </p>
                </div>
                <div class="large-6 columns">
                    <p class="text-right" style="padding-top:25px;">
                         <a href="all_18.html">&raquo; Next Page</a> 
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- large 8 -->

 <div class="large-4 medium-4 columns">
    <div class="hide-for-small">
        <div id="sidebar" class="sidebar">
            <div id="site-info" class="site-info">
                
                <h1>NathanCHEN</h1>

                <div class="site-des"></div>
                <div class="social">
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a class="rss" href="atom.xml" title="RSS">RSS</a>

                </div>
            </div>
            <div id="site-categories" class="side-item ">
                <div class="side-header">
                    <h2>Contact</h2>
                </div>
                <div class="side-content">
                    <ul class="posts-list">
                        <li class="post">
                            <p class="email-addr">tringchen AT gmail.com</p>

                            <p class="email-addr">江苏 · 南京</p>
                        </li>
                    </ul>
                </div>
            </div>
            <div id="site-categories" class="side-item ">
                <div class="side-header">
                    <h2>Categories</h2>
                </div>
                <div class="side-content">

                    <p class="cat-list">
                        
                        <a href="Java.html"><strong>Java</strong></a>
                        
                        <a href="JavaScript.html"><strong>JavaScript</strong></a>
                        
                        <a href="Ngnix.html"><strong>Ngnix</strong></a>
                        
                        <a href="tomcat.html"><strong>tomcat</strong></a>
                        
                        <a href="spring.html"><strong>spring</strong></a>
                        
                        <a href="RabbitMQ.html"><strong>RabbitMQ</strong></a>
                        
                        <a href="ELK.html"><strong>ELK</strong></a>
                        
                        <a href="%E7%BD%91%E7%BB%9C.html"><strong>网络</strong></a>
                        
                        <a href="%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB.html"><strong>源码阅读</strong></a>
                        
                        <a href="others.html"><strong>others</strong></a>
                        
                        <a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html"><strong>数据库</strong></a>
                        
                        <a href="PAXOS.html"><strong>PAXOS</strong></a>
                        
                        <a href="%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90Java%20Web%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95.html"><strong>深入分析Java Web技术内幕</strong></a>
                        
                        <a href="Java7%20Concurrency%20Cookbook.html"><strong>Java7 Concurrency Cookbook</strong></a>
                        
                        <a href="GoogleDevelopersWebFundamentals.html"><strong>GoogleDevelopersWebFundamentals</strong></a>
                        
                    </p>


                </div>
            </div>

            <div id="site-categories" class="side-item">
                <div class="side-header">
                    <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                    <ul class="posts-list">
                        
                        
                        <li class="post">
                            <a href="14608176804744.html">HTTP/2</a>
                        </li>
                        
                        
                        
                        <li class="post">
                            <a href="14606892007159.html">Web页面缓存</a>
                        </li>
                        
                        
                        
                        <li class="post">
                            <a href="14606396114001.html">Java中的Object对象</a>
                        </li>
                        
                        
                        
                        <li class="post">
                            <a href="14606028630903.html">深入Class文件结构</a>
                        </li>
                        
                        
                        
                        <li class="post">
                            <a href="14605288849994.html">Thread Synchronization Utilities</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                    </ul>
                </div>
            </div>
        </div>
        <!-- sidebar -->
    </div>
    <!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->
 <div class="page-bottom clearfix">
    <div class="row">
        <p class="copyright">Copyright &copy; 2016
            Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp;
            Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
    </div>
</div>
</section>
</div>
</div>




<script src="asset/js/foundation.min.js"></script>
<script>
    $(document).foundation();
    function fixSidebarHeight() {
        var w1 = $('.markdown-body').height();
        var w2 = $('#sidebar').height();
        if (w1 > w2) {
            $('#sidebar').height(w1);
        }
        ;
    }
    $(function () {
        fixSidebarHeight();
    })
    $(window).load(function () {
        fixSidebarHeight();
    });

</script>





</body>
</html>
