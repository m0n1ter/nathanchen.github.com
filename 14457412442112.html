<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Freemarker Error Handling - NathanCHEN
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="NathanCHEN" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>

  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        <li id="menu_item_index"><a href="index.html">HOME</a></li>
        <li id="menu_item_archives"><a href="archives.html">Archives</a></li>
        <li id="menu_item_about"><a href="about.html">ABOUT</a></li>
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" action="http://google.com/search" method="get">
    <input type="hidden" name="q" value="site:nathanchen.github.io" />
    <input tabindex="1" type="search" name="q"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; NathanCHEN</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="Java.html">Java</a></li>
        
            <li><a href="JavaScript.html">JavaScript</a></li>
        
            <li><a href="Ngnix.html">Ngnix</a></li>
        
            <li><a href="tomcat.html">tomcat</a></li>
        
            <li><a href="spring.html">spring</a></li>
        
            <li><a href="RabbitMQ.html">RabbitMQ</a></li>
        
            <li><a href="ELK.html">ELK</a></li>
        
            <li><a href="TCP/IP.html">TCP/IP</a></li>
        
            <li><a href="%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB.html">源码阅读</a></li>
        
            <li><a href="others.html">others</a></li>
        
            <li><a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html">数据库</a></li>
        
            <li><a href="PAXOS.html">PAXOS</a></li>
        
            <li><a href="%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90Java%20Web%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95.html">深入分析Java Web技术内幕</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>Freemarker Error Handling</h1>
     
        <div class="read-more clearfix">
          <span class="date">2015/10/25</span>

          
           
         
          <span class="comments">
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <h4 id="toc_0">The possible exception</h4>

<p>The exception that can occur regarding Freemarker could be classified like this:</p>

<ul>
<li>Exceptions occurring when you configure Freemarker: Typically you configure Freemarker only once in your application, when your application initializes itself.</li>
<li><p>Exceptions occurring when loading and parsing templates: When you call <code>Configuration.getTemplate(...)</code>, Freemarker has to load the template file into the memory and parse it. During this, two kinds of exceptions can occur:</p>

<ul>
<li><code>IOException</code> because the template file was not found, or other I/O problem occurred while trying to read it (you have no right to read the file, or there are disk errors).</li>
<li><code>freemarker.core.ParseException</code> because the template file is syntactically incorrrect according the rules of the FTL language. This exception is an <code>IOException</code> subclass.</li>
</ul></li>
<li><p>Exception occurring when executing templates. Two kinds of exceptions can occur:</p>

<ul>
<li><code>IOException</code> because there was an error when trying to write into the output writer.</li>
<li><p><code>freemarker.template.TemplatException</code> because other problem occurred while executing the template. For example, a frequent error is when a template refers to a variable which is not existing. Be default, when a <code>TemplatException</code> occurs, Freemarker prints the FTL error message and the statck trace to the output writer with plain text format, and then aborts the template execution by re-throwing the <code>TemplatException</code>, which then you can catch as <code>Template.process(...)</code> throws it.</p>

<pre><code>class MyTemplateExceptionHandler implements TemplateExceptionHandler {
    public void handleTemplateException(TemplateException te, Environment env, java.io.Writer out)
            throws TemplateException {
        try {
            out.write(&quot;[ERROR: &quot; + te.getMessage() + &quot;]&quot;);
        } catch (IOException e) {
            throw new TemplateException(&quot;Failed to print error message. Cause: &quot; + e, env);
        }
    }
}

...

cfg.setTemplateExceptionHandler(new MyTemplateExceptionHandler());
</code></pre></li>
</ul></li>
</ul>

<h4 id="toc_1">Handling missing values</h4>

<pre><code>${mouse!&quot;No mouse.&quot;}
&lt;#assign mouse=&quot;Jerry&quot;&gt;
${mouse!&quot;No mouse.&quot;}
</code></pre>

<p>The output will be:</p>

<pre><code>No mouse.
Jerry
</code></pre>

<hr/>

<pre><code>product.color!&quot;red&quot;
</code></pre>

<p>This will handle if <code>color</code> is missing inside <code>product</code>, but will not handle if <code>product</code> is missing. That is, the <code>product</code> variable itself must exist, otherwise the template processing will die with error.</p>

<pre><code>(product.color)!&quot;red&quot;
</code></pre>

<p>This will handle if <code>product.color</code> is missing. That is, if <code>product</code> is missing, or <code>product</code> exists but it does not contain <code>color</code>, the result will be <code>red</code>, and no error will occur.</p>

<p>The important difference between this and the previous example is that when surrounded with parentheses, it is allowed for any component of the expression to be undefined, while without parentheses only the last component of the expression is allowed to be undefined.</p>

<h5 id="toc_2">Missing value test operator</h5>

<pre><code>&lt;#if mouse??&gt;
Mouse found
&lt;/#if&gt;
</code></pre>

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="14457412442302.html" 
          title="Previous Post: What is HttpOnly?">&laquo; What is HttpOnly?</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
          <a  href="14457412441899.html" 
          title="Next Post: Levenshtein Distance"">Levenshtein Distance" &raquo;</a>
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          

          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>NathanCHEN</h1>
                <div class="site-des"></div>
                <div class="social">











  <a class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>
              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="Java.html"><strong>Java</strong></a>
        
            <a href="JavaScript.html"><strong>JavaScript</strong></a>
        
            <a href="Ngnix.html"><strong>Ngnix</strong></a>
        
            <a href="tomcat.html"><strong>tomcat</strong></a>
        
            <a href="spring.html"><strong>spring</strong></a>
        
            <a href="RabbitMQ.html"><strong>RabbitMQ</strong></a>
        
            <a href="ELK.html"><strong>ELK</strong></a>
        
            <a href="TCP/IP.html"><strong>TCP/IP</strong></a>
        
            <a href="%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB.html"><strong>源码阅读</strong></a>
        
            <a href="others.html"><strong>others</strong></a>
        
            <a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html"><strong>数据库</strong></a>
        
            <a href="PAXOS.html"><strong>PAXOS</strong></a>
        
            <a href="%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90Java%20Web%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95.html"><strong>深入分析Java Web技术内幕</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="14590098445355.html">应用多级缓存模式支撑海量读服务</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14589988314853.html">浅谈Web缓存</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14588873943004.html">深入分析`Java I/O`的工作机制</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14588864645651.html">深入Web请求过程</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14588864364518.html">I</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    



  </body>
</html>
